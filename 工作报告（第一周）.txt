


本周工作汇报：

7月8日
	配置recastDemo运行环境、查阅recastnavigation相关的介绍

7月9日
	配置recastDemo运行环境、查阅recastnavigation相关的介绍, 了解NavMesh的大致生成步骤
	Navmesh的生成的主要步骤：
		1、 体素化
		2、 生成行走区域
		3、 生成轮廓
		4、 生成多边形网格
		5、 生成高度信息

7月10日
	学习输入模型的voxelization详细原理、开始看相应的源码部分。理解输入geometry的表示形式（三角面片）
	
	源模型体素化过程的再理解：	对输入的源模型，通常是由三角面片组成。首先根据源模型的包围盒和一些指定的参数（cell的宽、高等）来构建体素空间。完成之后，把源模型投影到xz面（这样做的好处是，在之后将大大减少源模型与cell heightfield coloumn相交检测的次数）。然后遍历投影所涉及的cell heightfield  columns，对于每个cell cloumn，依次检测每个体素是否与源模型相交。这里会维护一个实心高度场数据结构，每当检测有相交的体素就把其加入到其中，但是在其加入实心高度场结果集中，会有二种情况：新加入体素的与维护的spans（这里会把结果集中连续的体素叫做spans）相交和不相交。如果不相交，则新创建一个span加入结果集。如果相交，这种情况又被分为三种情况（1、 新加入的体素的top高于已经存在的spans的top 2、*低于*  3、*等于*。（这一点理解上应该不准确，以后再回头理解））。根据相交的不同情况，会重新计算合并后的span的表面的可行标记。
	体素化过程中对可行表面的过滤，filter主要有以下几个：
	
		1、 看spans的top是否有足够的空间可以正常站立（minTraversableHeight）
		2、 看spans的top的倾斜度是否符合要求（maxTraversableSlope）
		3、 [可选] 是否要过滤突出的spans

7月11日
	学习Region生成步骤的详细原理，学习几何模型的表示方法，继续查阅obj文件的模型的表示形式。
	
	区域生成理解：
	首先，这一步用到的是通过第一步的输出solid Heightfield来得到open heightfield。然后进一步过滤不可行走的spans。这是通过两个过滤条件，1、 span不能过于靠近障碍，得留有一定的通行空间，一般设置为agent半径。 2、 span上要有足够的行走空间，比如桌子上的空间太小，设置为不行走。嗯。。接下来就把相邻接的span合并形成较大的region，这个时候会考虑一个变量值maximum vertical step，这样值设置得合理就会把类似于楼梯这样的结构连接成一个region。根据NMGen的说法，生成region的这一步还会用到分水岭算法，但目前我还没能理解为啥需要这个算法。在这一步中，还会生成邻接邻居（这里会有邻居检测算法，要通过一些检测才能确定是否为合法邻接，1、 maxStepHeight 2、合适的floor-ceilling gap）
	
7月12日
	学习Region生成步骤的详细原理、研究其中用到的分水岭算法
	学习图像的距离变换
	
	

下周工作计划：
	
	1、继续分析阅读Navmesh网格的生成源码及其涉及的相关知识
	2、如果顺利则学习相关的寻路算法，继续阅读Detour寻路部分的源码